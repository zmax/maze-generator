# TypeScript è¿·å®®ç”Ÿæˆèˆ‡æ±‚è§£å™¨

é€™æ˜¯ä¸€å€‹ä½¿ç”¨ TypeScript ç·¨å¯«çš„å°ˆæ¡ˆï¼Œå°ˆé–€ç”¨æ–¼ç”Ÿæˆå’Œè§£æ±ºè¿·å®®ã€‚å®ƒå¯¦ç¾äº†å¤šç¨®ç¶“å…¸çš„è¿·å®®ç”Ÿæˆæ¼”ç®—æ³•ï¼Œä¸¦æä¾›äº†ä¸€å€‹ä½¿ç”¨ A* æ¼”ç®—æ³•çš„æ±‚è§£å™¨ã€‚æ‰€æœ‰çµæœéƒ½å¯ä»¥åœ¨ä¸»æ§å°ä¸­ä»¥ ASCII è—è¡“çš„å½¢å¼è¦–è¦ºåŒ–å‘ˆç¾ã€‚



## âœ¨ åŠŸèƒ½ç‰¹è‰²

- **å¤šç¨®ç”Ÿæˆæ¼”ç®—æ³•**:
  - **éè¿´å›æº¯æ³• (Recursive Backtracker)**: ç¶“å…¸çš„æ·±åº¦å„ªå…ˆæœå°‹æ³•ï¼Œç”¢ç”Ÿè·¯å¾‘é•·ä¸”æ›²æŠ˜çš„è¿·å®®ã€‚
  - **å¸¶æœ‰åå¥½æ€§çš„éè¿´å›æº¯æ³• (Biased Recursive Backtracker)**: ç”¢ç”Ÿè¼ƒå¤šé•·å»Šçš„è®Šé«”ï¼Œç›´ç·šåå¥½å€¼å¯é…ç½®ã€‚
  - **æ™®æ—æ¼”ç®—æ³• (Prim's Algorithm)**: å¾ä¸€é»é–‹å§‹ç”Ÿé•·ï¼Œé¢¨æ ¼é¡ä¼¼æœ€å°ç”Ÿæˆæ¨¹ã€‚
  - **å…‹é­¯æ–¯å…‹çˆ¾æ¼”ç®—æ³• (Kruskal's Algorithm)**: ç”¢ç”Ÿå«æœ‰å¤§é‡çŸ­å°æ­»è·¯çš„è¿·å®®ã€‚
  - **å¨çˆ¾éœæ¼”ç®—æ³• (Wilson's Algorithm)**: é€ééš¨æ©ŸéŠèµ°ç”¢ç”Ÿï¼Œç”Ÿæˆéå¸¸å‡å‹»ã€ç„¡åè¦‹çš„è¿·å®®ã€‚
  - **ç”Ÿé•·æ¨¹æ¼”ç®—æ³• (Growing Tree Algorithm)**: æ™®æ—æ¼”ç®—æ³•å’Œéè¿´å›æº¯æ³•çš„æ··åˆé«”ï¼Œå¯é…ç½®ä¸åŒç­–ç•¥ï¼ˆæœ€æ–°ã€éš¨æ©Ÿã€æœ€èˆŠï¼‰ä»¥ç”¢ç”Ÿä¸åŒé¢¨æ ¼çš„è¿·å®®ã€‚
  - **äºŒå…ƒæ¨¹æ¼”ç®—æ³• (Binary Tree Algorithm)**: é€Ÿåº¦æ¥µå¿«ï¼Œå¯é…ç½®åå¥½æ–¹å‘ï¼ˆä¾‹å¦‚åŒ—æ–¹/è¥¿æ–¹ï¼‰ä»¥ç”¢ç”Ÿä¸åŒç´‹ç†ã€‚
  - **Aldous-Broder æ¼”ç®—æ³•**: å¦ä¸€ç¨®ç”¢ç”Ÿå‡å‹»ç”Ÿæˆæ¨¹çš„æ¼”ç®—æ³•ï¼ŒåŸç†ç°¡å–®ä½†æ•ˆç‡è¼ƒä½ã€‚
- **A\* æ±‚è§£å™¨**: ä½¿ç”¨ A* æ¼”ç®—æ³•é«˜æ•ˆåœ°å°‹æ‰¾å¾èµ·é»åˆ°çµ‚é»çš„æœ€çŸ­è·¯å¾‘ã€‚
- **ä¸»æ§å°è¦–è¦ºåŒ–**: å°‡ç”Ÿæˆçš„è¿·å®®å’Œè§£ç­”è·¯å¾‘ä»¥ ASCII å½¢å¼æ¸…æ™°åœ°ç¹ªè£½åœ¨ä¸»æ§å°ä¸­ã€‚
- **å¯é‡ç¾çš„éš¨æ©Ÿæ€§**: å¯é¸çš„éš¨æ©Ÿç¨®å­å…è¨±æ‚¨é‡ç¾å®Œå…¨ç›¸åŒçš„è¿·å®®ã€‚
- **é›¶ä¾è³´**: ç´” TypeScript å¯¦ç¾ï¼Œä¸éœ€ä»»ä½•å¤–éƒ¨å‡½å¼åº«ã€‚
- **å‹åˆ¥å®‰å…¨**: å……åˆ†åˆ©ç”¨ TypeScript çš„å‹åˆ¥ç³»çµ±ï¼Œç¨‹å¼ç¢¼æ¸…æ™°ä¸”æ˜“æ–¼ç¶­è­·ã€‚

## ğŸš€ å¦‚ä½•é–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- [Node.js](https://nodejs.org/) (å»ºè­°ç‰ˆæœ¬ 16 æˆ–ä»¥ä¸Š)
- [TypeScript](https://www.typescriptlang.org/)
- `ts-node` (ç”¨æ–¼ç›´æ¥åŸ·è¡Œ TypeScript æª”æ¡ˆ)

### å®‰è£èˆ‡åŸ·è¡Œ

1.  è‹¥å°šæœªå®‰è£ `ts-node`ï¼Œè«‹é€é npm é€²è¡Œå…¨åŸŸå®‰è£ï¼š
    ```bash
    npm install -g ts-node
    ```

2.  åŸ·è¡Œå°ˆæ¡ˆä¸­åŒ…å«çš„ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼Œå®ƒæœƒç‚ºæ¯ç¨®æ¼”ç®—æ³•ç”¢ç”Ÿä¸€å€‹ 15x10 çš„è¿·å®®ä¸¦æ±‚è§£ï¼š
    ```bash
    ts-node d:/zmax/works/vibe-coding/maze/maze.ts
    ```

## ğŸ› ï¸ API ä½¿ç”¨æ–¹å¼

æ‚¨å¯ä»¥è¼•æ˜“åœ°åœ¨æ‚¨è‡ªå·±çš„å°ˆæ¡ˆä¸­å¼•å…¥ä¸¦ä½¿ç”¨é€™äº›æ¨¡çµ„ã€‚
```typescript
import { MazeGenerator } from './maze-generator';
import { MazeSolver } from './maze-solver';
import { drawMazeToConsole } from './maze-drawer';
import type { Point, MazeGeneratorOptions } from './types';

// 1. é¸æ“‡ä¸€ç¨®æ¼”ç®—æ³•ï¼Œç”¢ç”Ÿä¸€å€‹ 20x10 çš„è¿·å®®
const options: MazeGeneratorOptions = {
  seed: 12345,
  growingTreeStrategy: 'newest', // for 'growing-tree': 'newest' | 'random' | 'oldest'
  straightBias: 0.9,             // for 'recursive-backtracker-biased': a value between 0.0 and 1.0
  binaryTreeBias: 'south-east', // for 'binary-tree': 'north-west' | 'north-east' | 'south-west' | 'south-east'
};
const mazeGenerator = new MazeGenerator(20, 10, 'aldous-broder', options);
const mazeGrid = mazeGenerator.generate();

// 2. è¨­å®šè¿·å®®çš„å…¥å£å’Œå‡ºå£
const start: Point = { x: 0, y: 0 };
const end: Point = { x: 19, y: 9 };

// æ‰“é–‹å…¥å£å’Œå‡ºå£çš„ç‰†å£
mazeGrid[start.y][start.x].walls.top = false;
mazeGrid[end.y][end.x].walls.bottom = false;

// 3. å»ºç«‹æ±‚è§£å™¨ä¸¦è§£æ±ºè¿·å®®
const solver = new MazeSolver(mazeGrid);
const path = solver.solve(start, end);

// 4. åœ¨ä¸»æ§å°ç¹ªè£½è¿·å®®å’Œè§£ç­”è·¯å¾‘
console.log("ä½¿ç”¨ Aldous-Broder æ¼”ç®—æ³•ç”¢ç”Ÿçš„ 20x10 è¿·å®®ï¼š");
drawMazeToConsole(mazeGrid, path);
```

### è¼¸å‡ºç¯„ä¾‹

åŸ·è¡Œä¸Šè¿°ç¨‹å¼ç¢¼å¾Œï¼Œæ‚¨å°‡åœ¨ä¸»æ§å°çœ‹åˆ°é¡ä¼¼ä¸‹æ–¹çš„è¼¸å‡ºï¼š

```
ä½¿ç”¨ Prim's Algorithm ç”¢ç”Ÿçš„ 20x10 è¿·å®®ï¼š
+   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| .   .   .   . |   |           |           |   |   |   |       |   |       |
+ +---+ +---+---+ + + +---+---+---+---+---+---+ + + + + + +---+---+ + +---+---+
| | .   . |   | . | |   |       |   |   |   |   | | | | |   |   | | | |   |
+ + +---+ + + + + + +---+---+---+ + + + + + +---+ + + + +---+ + + + + + +---+
| |   | . | | | . |   |       |   | | | | |   |   | | |   | | | | | | |   |
+ +---+ + + + + + +---+---+---+---+ + + + +---+---+---+---+ + + + + + +---+---+
|   | .   . | | .   .   .   .   . | | | |   |   |   |   | | | | | | |   |   |
+---+ +---+---+ +---+---+---+---+ + + + + +---+---+---+ + + + + + + +---+---+
|   |   |       |   |   |   | .   . | | | |   |   |   | | | | | | |   |   |
+ +---+---+---+---+---+---+ + +---+---+ + +---+ + + + + + + + + + +---+---+---+
| |   |   |   |   |   |   | |   | .   . |   | | | | | | | | | | |   |   |   |
+ +---+---+---+---+---+---+---+---+ +---+---+ + + + + + + + + + +---+---+---+
|   |   |   |   |   |   |   |   | | .   . | | | | | | | | | | |   |   |   |
+---+---+---+---+---+---+---+---+ + +---+ + + + + + + + + + + +---+---+---+---+
|   |   |   |   |   |   |   |   | | | .   . | | | | | | | | |   |   |   |   |
+---+---+---+---+---+---+---+---+---+ +---+ + + + + + + + + +---+---+---+---+
|   |   |   |   |   |   |   |   |   |   | . | | | | | | | |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+ + + + + + + + + +---+---+---+---+---+
|   |   |   |   |   |   |   |   |   |   | .   .   .   .   .   .   .   .   . |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+   +
```

## ğŸ›ï¸ å°ˆæ¡ˆçµæ§‹

- **`maze.ts`**: å°ˆæ¡ˆçš„ä¸»è¦é€²å…¥é»ï¼ŒåŒ…å«åŸ·è¡Œç¯„ä¾‹ã€‚
- **`types.ts`**: åŒ…å«å…±äº«çš„ TypeScript å‹åˆ¥å®šç¾©ï¼Œå¦‚ `Cell` å’Œ `Point`ã€‚
- **`maze-generator.ts`**: åŒ…å« `MazeGenerator` é¡åˆ¥å’Œæ‰€æœ‰è¿·å®®ç”Ÿæˆæ¼”ç®—æ³•çš„é‚è¼¯ã€‚
- **`maze-solver.ts`**: åŒ…å« `MazeSolver` é¡åˆ¥å’Œ A* æ±‚è§£æ¼”ç®—æ³•çš„é‚è¼¯ã€‚
- **`maze-drawer.ts`**: åŒ…å« `drawMazeToConsole` è¼”åŠ©å‡½å¼ï¼Œç”¨æ–¼åœ¨ä¸»æ§å°ç¹ªè£½è¿·å®®ã€‚
- **`maze-utils.ts`**: åŒ…å«èˆ‡è¿·å®®ç¶²æ ¼æ“ä½œç›¸é—œçš„é€šç”¨è¼”åŠ©å‡½å¼ã€‚
- **`data-structures/`**: åŒ…å«é€šç”¨çš„è³‡æ–™çµæ§‹ã€‚
  - **`disjoint-set.ts`**: ä¸¦æŸ¥é›† (Disjoint Set Union) çš„å¯¦ä½œã€‚
  - **`priority-queue.ts`**: æœ€å°å † (Min-Heap) å„ªå…ˆæ¬Šä½‡åˆ—çš„å¯¦ä½œã€‚

## ğŸ’¡ æœªä¾†å¯æ“´å……æ–¹å‘

- **æœ€ä½³åŒ–æ±‚è§£å™¨**: å°‡ `MazeSolver` ä¸­çš„ `openSet` å¾é™£åˆ—æ”¹ç‚ºä½¿ç”¨æœ€å°å †ï¼ˆMin-Heapï¼‰ï¼Œä»¥æå‡å¤§å‹è¿·å®®çš„æ±‚è§£æ•ˆèƒ½ã€‚
- **åœ–å½¢åŒ–ä»‹é¢ (GUI)**: ä½¿ç”¨ HTML Canvasã€React æˆ–å…¶ä»–å‰ç«¯æ¡†æ¶å»ºç«‹ä¸€å€‹äº’å‹•å¼çš„åœ–å½¢ä»‹é¢ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥å³æ™‚çœ‹åˆ°è¿·å®®ç”Ÿæˆéç¨‹ã€‚
- **æ–°å¢æ¼”ç®—æ³•**: åŠ å…¥æ›´å¤šè¿·å®®ç”Ÿæˆæ¼”ç®—æ³•ï¼Œä¾‹å¦‚ "Growing Tree" æˆ– "Binary Tree"ã€‚