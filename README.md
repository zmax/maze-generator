# TypeScript 迷宮生成與求解器

這是一個使用 TypeScript 編寫的專案，專門用於生成和解決迷宮。它實現了多種經典的迷宮生成演算法，並提供了一個使用 A* 演算法的求解器。所有結果都可以在主控台中以 ASCII 藝術的形式視覺化呈現。



## ✨ 功能特色

- **多種生成演算法**:
  - **遞迴回溯法 (Recursive Backtracker)**: 經典的深度優先搜尋法，產生路徑長且曲折的迷宮。
  - **帶有偏好性的遞迴回溯法 (Biased Recursive Backtracker)**: 產生較多長廊的變體。
  - **普林演算法 (Prim's Algorithm)**: 從一點開始生長，風格類似最小生成樹。
  - **克魯斯克爾演算法 (Kruskal's Algorithm)**: 產生含有大量短小死路的迷宮。
  - **威爾遜演算法 (Wilson's Algorithm)**: 透過隨機遊走產生，生成非常均勻、無偏見的迷宮。
  - **生長樹演算法 (Growing Tree Algorithm)**: 普林演算法和遞迴回溯法的混合體，非常靈活。
  - **二元樹演算法 (Binary Tree Algorithm)**: 速度極快，但會產生有強烈對角線偏向的迷宮。
- **A\* 求解器**: 使用 A* 演算法高效地尋找從起點到終點的最短路徑。
- **主控台視覺化**: 將生成的迷宮和解答路徑以 ASCII 形式清晰地繪製在主控台中。
- **零依賴**: 純 TypeScript 實現，不需任何外部函式庫。
- **型別安全**: 充分利用 TypeScript 的型別系統，程式碼清晰且易於維護。

## 🚀 如何開始

### 環境需求

- [Node.js](https://nodejs.org/) (建議版本 16 或以上)
- [TypeScript](https://www.typescriptlang.org/)
- `ts-node` (用於直接執行 TypeScript 檔案)

### 安裝與執行

1.  若尚未安裝 `ts-node`，請透過 npm 進行全域安裝：
    ```bash
    npm install -g ts-node
    ```

2.  執行專案中包含的範例程式碼，它會為每種演算法產生一個 15x10 的迷宮並求解：
    ```bash
    ts-node d:/zmax/works/vibe-coding/maze/maze.ts
    ```

## 🛠️ API 使用方式

您可以輕易地在您自己的專案中引入並使用這些模組。

```typescript
import { MazeGenerator, MazeSolver, drawMazeToConsole } from './maze';

// 1. 選擇一種演算法，產生一個 20x10 的迷宮
const mazeGenerator = new MazeGenerator(20, 10, 'prim');
const mazeGrid = mazeGenerator.generate();

// 2. 設定迷宮的入口和出口
const start = { x: 0, y: 0 };
const end = { x: 19, y: 9 };

// 打開入口和出口的牆壁
mazeGrid[start.y][start.x].walls.top = false;
mazeGrid[end.y][end.x].walls.bottom = false;

// 3. 建立求解器並解決迷宮
const solver = new MazeSolver(mazeGrid);
const path = solver.solve(start, end);

// 4. 在主控台繪製迷宮和解答路徑
console.log("使用 Prim's Algorithm 產生的 20x10 迷宮：");
drawMazeToConsole(mazeGrid, path);
```

### 輸出範例

執行上述程式碼後，您將在主控台看到類似下方的輸出：

```
使用 Prim's Algorithm 產生的 20x10 迷宮：
+   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| .   .   .   . |   |           |           |   |   |   |       |   |       |
+ +---+ +---+---+ + + +---+---+---+---+---+---+ + + + + + +---+---+ + +---+---+
| | .   . |   | . | |   |       |   |   |   |   | | | | |   |   | | | |   |
+ + +---+ + + + + + +---+---+---+ + + + + + +---+ + + + +---+ + + + + + +---+
| |   | . | | | . |   |       |   | | | | |   |   | | |   | | | | | | |   |
+ +---+ + + + + + +---+---+---+---+ + + + +---+---+---+---+ + + + + + +---+---+
|   | .   . | | .   .   .   .   . | | | |   |   |   |   | | | | | | |   |   |
+---+ +---+---+ +---+---+---+---+ + + + + +---+---+---+ + + + + + + +---+---+
|   |   |       |   |   |   | .   . | | | |   |   |   | | | | | | |   |   |
+ +---+---+---+---+---+---+ + +---+---+ + +---+ + + + + + + + + + +---+---+---+
| |   |   |   |   |   |   | |   | .   . |   | | | | | | | | | | |   |   |   |
+ +---+---+---+---+---+---+---+---+ +---+---+ + + + + + + + + + +---+---+---+
|   |   |   |   |   |   |   |   | | .   . | | | | | | | | | | |   |   |   |
+---+---+---+---+---+---+---+---+ + +---+ + + + + + + + + + + +---+---+---+---+
|   |   |   |   |   |   |   |   | | | .   . | | | | | | | | |   |   |   |   |
+---+---+---+---+---+---+---+---+---+ +---+ + + + + + + + + +---+---+---+---+
|   |   |   |   |   |   |   |   |   |   | . | | | | | | | |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+ + + + + + + + + +---+---+---+---+---+
|   |   |   |   |   |   |   |   |   |   | .   .   .   .   .   .   .   .   . |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+   +
```

## 🏛️ 專案結構

- **`maze.ts`**: 包含所有核心邏輯的檔案。
  - **`Cell` interface**: 定義迷宮中每個儲存格的資料結構。
  - **`MazeGenerationAlgorithm` type**: 定義可用的演算法名稱。
  - **`MazeGenerator` class**: 負責根據指定演算法產生迷宮。
  - **`MazeSolver` class**: 負責接收一個迷宮網格，並使用 A* 演算法找出路徑。
  - **`drawMazeToConsole()` function**: 一個輔助函式，用於將迷宮資料結構視覺化。

## 💡 未來可擴充方向

- **最佳化求解器**: 將 `MazeSolver` 中的 `openSet` 從陣列改為使用最小堆（Min-Heap），以提升大型迷宮的求解效能。
- **圖形化介面 (GUI)**: 使用 HTML Canvas、React 或其他前端框架建立一個互動式的圖形介面，讓使用者可以即時看到迷宮生成過程。
- **新增演算法**: 加入更多迷宮生成演算法，例如 "Growing Tree" 或 "Binary Tree"。
- **可配置的隨機種子**: 允許傳入一個隨機種子，以便能夠重現相同的迷宮。