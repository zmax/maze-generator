# TypeScript 迷宮生成與求解器

這是一個使用 TypeScript 和 HTML Canvas 編寫的互動式 Web 應用程式，專門用於生成、求解和視覺化迷宮。它實現了多種經典的迷宮生成演算法，並提供了一個高效的雙向 A* 求解器。



## ✨ 功能特色

- **多種生成演算法**:
  - **遞迴回溯法 (Recursive Backtracker)**: 經典的深度優先搜尋法，產生路徑長且曲折的迷宮。
  - **帶有偏好性的遞迴回溯法 (Biased Recursive Backtracker)**: 產生較多長廊的變體，直線偏好值可配置。
  - **普林演算法 (Prim's Algorithm)**: 從一點開始生長，風格類似最小生成樹。
  - **克魯斯克爾演算法 (Kruskal's Algorithm)**: 產生含有大量短小死路的迷宮。
  - **威爾遜演算法 (Wilson's Algorithm)**: 透過隨機遊走產生，生成非常均勻、無偏見的迷宮。
  - **生長樹演算法 (Growing Tree Algorithm)**: 普林演算法和遞迴回溯法的混合體，可配置不同策略（最新、隨機、最舊）以產生不同風格的迷宮。
  - **二元樹演算法 (Binary Tree Algorithm)**: 速度極快，可配置偏好方向（例如北方/西方）以產生不同紋理。
  - **Aldous-Broder 演算法**: 另一種產生均勻生成樹的演算法，原理簡單但效率較低。
  - **響尾蛇演算法 (Sidewinder Algorithm)**: 另一種極速演算法，會產生帶有強烈水平走廊的迷宮。
- **高效求解器**: 使用高效的「雙向 A* 演算法」來尋找從起點到終點的最短路徑。
- **HTML 輸出**: 能夠將生成的迷宮和求解路徑匯出為獨立的 HTML 檔案，以便在瀏覽器中視覺化。
- **逐步動畫**: 生成和求解的每一步都可以透過 Canvas 動畫即時呈現。
- **互動式介面**: 提供完整的 UI 控制項，讓使用者可以自訂演算法、尺寸、隨機種子和動畫速度。
- **可重現的隨機性**: 可選的隨機種子允許您重現完全相同的迷宮。
- **零依賴**: 純 TypeScript 實現，不需任何外部函式庫。
- **型別安全**: 充分利用 TypeScript 的型別系統，程式碼清晰且易於維護。

## 🚀 如何開始

### 環境需求

- Node.js (建議版本 18 或以上)
- pnpm (或 npm/yarn)

### 安裝與執行

1.  安裝專案依賴：
    ```bash
    pnpm install
    ```

2.  啟動本地開發伺服器：
    ```bash
    pnpm start
    ```

3.  在您的瀏覽器中開啟 `http://localhost:8000`。

### 建立生產版本
若要將前端程式碼打包成單一的 JavaScript 檔案，請執行：
```bash
pnpm build
```

### 輸出範例

執行上述程式碼後，您將在主控台看到類似下方的輸出：

```
使用 Prim's Algorithm 產生的 20x10 迷宮：
+   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| .   .   .   . |   |           |           |   |   |   |       |   |       |
+ +---+ +---+---+ + + +---+---+---+---+---+---+ + + + + + +---+---+ + +---+---+
| | .   . |   | . | |   |       |   |   |   |   | | | | |   |   | | | |   |
+ + +---+ + + + + + +---+---+---+ + + + + + +---+ + + + +---+ + + + + + +---+
| |   | . | | | . |   |       |   | | | | |   |   | | |   | | | | | | |   |
+ +---+ + + + + + +---+---+---+---+ + + + +---+---+---+---+ + + + + + +---+---+
|   | .   . | | .   .   .   .   . | | | |   |   |   |   | | | | | | |   |   |
+---+ +---+---+ +---+---+---+---+ + + + + +---+---+---+ + + + + + + +---+---+
|   |   |       |   |   |   | .   . | | | |   |   |   | | | | | | |   |   |
+ +---+---+---+---+---+---+ + +---+---+ + +---+ + + + + + + + + + +---+---+---+
| |   |   |   |   |   |   | |   | .   . |   | | | | | | | | | | |   |   |   |
+ +---+---+---+---+---+---+---+---+ +---+---+ + + + + + + + + + +---+---+---+
|   |   |   |   |   |   |   |   | | .   . | | | | | | | | | | |   |   |   |
+---+---+---+---+---+---+---+---+ + +---+ + + + + + + + + + + +---+---+---+---+
|   |   |   |   |   |   |   |   | | | .   . | | | | | | | | |   |   |   |   |
+---+---+---+---+---+---+---+---+---+ +---+ + + + + + + + + +---+---+---+---+
|   |   |   |   |   |   |   |   |   |   | . | | | | | | | |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+ + + + + + + + + +---+---+---+---+---+
|   |   |   |   |   |   |   |   |   |   | .   .   .   .   .   .   .   .   . |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+   +
```

## 🏛️ 專案結構

- **`maze.ts`**: 專案的主要進入點，包含執行範例。
- **`types.ts`**: 包含共享的 TypeScript 型別定義，如 `Cell` 和 `Point`。
- **`maze-generator.ts`**: 包含 `MazeGenerator` 類別和所有迷宮生成演算法的邏輯。
- **`maze-solver.ts`**: 包含 `MazeSolver` 類別和 A* 求解演算法的邏輯。
- **`maze-drawer.ts`**: 包含 `drawMazeToConsole` 輔助函式，用於在主控台繪製迷宮。
- **`maze-utils.ts`**: 包含通用的輔助函式，如網格操作和隨機數生成。
- **`data-structures/`**: 包含通用的資料結構。
  - **`disjoint-set.ts`**: 並查集 (Disjoint Set Union) 的實作。
  - **`priority-queue.ts`**: 最小堆 (Min-Heap) 優先權佇列的實作。

## 💡 未來可擴充方向

- **圖形化介面 (GUI)**: 使用 HTML Canvas、React 或其他前端框架建立一個互動式的圖形介面，讓使用者可以即時看到迷宮生成過程。
- **新增求解演算法**: 加入更多路徑尋找演算法，例如廣度優先搜尋 (BFS) 或 Dijkstra 演算法，並比較其效能。